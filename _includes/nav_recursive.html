<!-- BEGIN _includes/nav_recursive.html -->
{% for item in include.nav %}
<div x-data="{ $open : $persist(false).as('menu-toggle-{{ item.title }}') }" class="space-y-1">
  <!-- Current: "bg-gray-100 text-gray-900", Default: "bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900" -->
  <button type="button" @click="$open = ! $open" :aria-expanded="$open" class="molecula-menu-btn bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900 group w-full flex items-center pl-2 pr-1 py-2 text-left text-sm font-medium  outline-none">
    <!-- Heroicon name: outline/folder -->
    <svg xmlns="http://www.w3.org/2000/svg" class="folder mr-3 flex-shrink-0 h-6 w-6 text-gray-400 group-hover:text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
      <path stroke-linecap="round" stroke-linejoin="round" d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" />
    </svg>

    <span class="flex-1"> {{ item.title }} </span>
    <!-- Expanded: "text-gray-400 rotate-90", Collapsed: "text-gray-300" -->
    <svg class="molecula-menu-arrow text-gray-300 ml-3 flex-shrink-0 h-5 w-5 transform group-hover:text-gray-400 transition-colors ease-in-out duration-150" viewBox="0 0 20 20" aria-hidden="true">
      <path d="M6 6L14 10L6 14V6Z" fill="currentColor" />
    </svg>
  </button>

  <!-- Expandable link section, show/hide based on state. -->
  <div class="space-y-1" x-show="$open" x-transition.scale.origin.top x-cloak>
    <!-- show subcatagories first -->
    {% if item.subnav %}
    <div class="ml-3">
    {% include nav_recursive.html nav=item.subnav %}
    </div>
    {% endif %}

    {% for post in site.categories[item.category] %}
      <!-- "category" will be the most low-level category available. -->
      {% capture category %}{{ post.categories | last }}{% endcapture %}
      <!-- resolve text of page with priority for the post's sidebar_label property (if available), and defaulting to the post's title if needed. -->
      {% capture text %}
      {% if post.sidebar_label %}
        {{ post.sidebar_label }}
      {% else %}
        {{ post.title }}
      {% endif %}
      {% endcapture %}

      <!-- check to make sure that no items with subcatagories are shown, they should have already been shown at the top -->
      {% if item.category == category && text %}

        {% if page.url == post.url %}
        <a class="group w-full flex items-center pl-11 pr-2 py-2 text-sm font-medium text-gray-600  bg-gray-200"> {{ text }} </a>
        {% else %}
        <a href="{{ post.url }}" class="group w-full flex items-center pl-11 pr-2 py-2 text-sm font-medium text-gray-600  hover:text-gray-900 hover:bg-gray-50"> {{ text }} </a>
        {% endif %}
      {% endif %}
    {% endfor %}
  </div>
</div>
{% endfor %}
<!-- END _includes/nav_recursive.html -->